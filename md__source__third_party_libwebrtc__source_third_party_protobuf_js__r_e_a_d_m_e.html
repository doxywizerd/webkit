<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>webkit: Protocol Buffers - Google&#39;s data interchange format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">webkit
   &#160;<span id="projectnumber">2cdf99a9e3038c7e01b3c37e8ad903ecbe5eecf1</span>
   </div>
   <div id="projectbrief">https://github.com/WebKit/webkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Protocol Buffers - <a class="el" href="namespace_google.html">Google</a>'s data interchange format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/google/protobuf"></a></p>
<p>Copyright 2008 <a class="el" href="namespace_google.html">Google</a> Inc.</p>
<p>This directory contains the JavaScript Protocol Buffers runtime library.</p>
<p><a class="el" href="protocol_the-p.html">The</a> library is currently compatible with:</p>
<ol type="1">
<li>CommonJS-style imports (eg. `var protos = require('my-protos');<code>)</code></li>
<li><code>Closure-style imports (eg.</code>goog.require('my.package.MyProto');`)</li>
</ol>
<p>Support for ES6-style imports is not implemented yet. Browsers can be supported by using Browserify, webpack, Closure Compiler, etc. to resolve imports at compile time.</p>
<p>To use Protocol Buffers with JavaScript, you need two main components:</p>
<ol type="1">
<li><a class="el" href="protocol_the-p.html">The</a> protobuf runtime library. You can install this with <code>npm install google-protobuf</code>, or use the files in this directory.</li>
<li><a class="el" href="protocol_the-p.html">The</a> Protocol Compiler <code>protoc</code>. This translates <code>.proto</code> files into <code>.js</code> files. <a class="el" href="protocol_the-p.html">The</a> compiler is not currently available via npm, but you can download a pre-built binary <a href="https://github.com/google/protobuf/releases">on GitHub</a> (look for the <code>protoc-*.zip</code> files under <b>Downloads</b>).</li>
</ol>
<h1>Setup </h1>
<p>First, obtain the Protocol Compiler. <a class="el" href="protocol_the-p.html">The</a> easiest way is to download a pre-built binary from <a href="https://github.com/google/protobuf/releases">https://github.com/google/protobuf/releases</a>.</p>
<p>If you want, you can compile <code>protoc</code> from source instead. To do this follow the instructions in https://github.com/google/protobuf/blob/master/src/README.md "the top-level
README".</p>
<p>Once you have <code>protoc</code> compiled, you can run the tests by typing: </p><pre class="fragment">$ cd js
$ npm install
$ npm test

# If your protoc is somewhere else than ../src/protoc, instead do this.
# But make sure your protoc is the same version as this (or compatible)!
$ PROTOC=/usr/local/bin/protoc npm test
</pre><p>This will run two separate copies of the tests: one that uses Closure Compiler style imports and one that uses CommonJS imports. You can see all the CommonJS files in <code>commonjs_out/</code>. If all of these tests pass, you know you have a working setup.</p>
<h1>Using Protocol Buffers in your own project </h1>
<p>To use Protocol Buffers in your own project, you need to integrate the Protocol Compiler into your build system. <a class="el" href="protocol_the-p.html">The</a> details are a little different depending on whether you are using Closure imports or CommonJS imports:</p>
<h2>Closure Imports </h2>
<p>If you want to use Closure imports, your build should run a command like this: </p><pre class="fragment">$ protoc --js_out=library=myproto_libs,binary:. messages.proto base.proto
</pre><p>For Closure imports, <code>protoc</code> will generate a single output file (<code>myproto_libs.js</code> in this example). <a class="el" href="protocol_the-p.html">The</a> generated file will <code>goog.provide()</code> all of the types defined in your .proto files. For example, for the unit tests the generated files contain many <code>goog.provide</code> statements like: </p><pre class="fragment">goog.provide('proto.google.protobuf.DescriptorProto');
goog.provide('proto.google.protobuf.DescriptorProto.ExtensionRange');
goog.provide('proto.google.protobuf.DescriptorProto.ReservedRange');
goog.provide('proto.google.protobuf.EnumDescriptorProto');
goog.provide('proto.google.protobuf.EnumOptions');
</pre><p><a class="el" href="protocol_the-p.html">The</a> generated code will also <code>goog.require()</code> many types in the core library, and they will require many types in the <a class="el" href="namespace_google.html">Google</a> Closure library. So make sure that your <code>goog.provide()</code> / <code>goog.require()</code> setup can find all of your generated code, the core library <code>.js</code> files in this directory, and the <a class="el" href="namespace_google.html">Google</a> Closure library itself.</p>
<p>Once you've done this, you should be able to import your types with statements like: </p><pre class="fragment">goog.require('proto.my.package.MyMessage');

var message = proto.my.package.MyMessage();
</pre><h2>CommonJS imports </h2>
<p>If you want to use CommonJS imports, your build should run a command like this: </p><pre class="fragment">$ protoc --js_out=import_style=commonjs,binary:. messages.proto base.proto
</pre><p>For CommonJS imports, <code>protoc</code> will spit out one file per input file (so <code>messages_pb.js</code> and <code>base_pb.js</code> in this example). <a class="el" href="protocol_the-p.html">The</a> generated code will depend on the core runtime, which should be in a file called <code>google-protobuf.js</code>. If you are installing from <code>npm</code>, this file should already be built and available. If you are running from GitHub, you need to build it first by running: </p><pre class="fragment">$ gulp dist
</pre><p>Once you've done this, you should be able to import your types with statements like: </p><pre class="fragment">var messages = require('./messages_pb');

var message = new messages.MyMessage();
</pre><h2><a class="el" href="protocol_the-p.html">The</a> <code>--js_out</code> flag </h2>
<p><a class="el" href="protocol_the-p.html">The</a> syntax of the <code>--js_out</code> flag is: </p><pre class="fragment">--js_out=[OPTIONS:]output_dir
</pre><p>Where <code>OPTIONS</code> are separated by commas. Options are either <code>opt=val</code> or just <code>opt</code> (for options that don't take a value). <a class="el" href="protocol_the-p.html">The</a> available options are specified and documented in the <code>GeneratorOptions</code> struct in <a href="https://github.com/google/protobuf/blob/master/src/google/protobuf/compiler/js/js_generator.h#L53">src/google/protobuf/compiler/js/js_generator.h</a>.</p>
<p>Some examples:</p>
<ul>
<li><code>--js_out=library=myprotos_lib.js,binary:.</code>: this contains the options <code>library=myprotos.lib.js</code> and <code>binary</code> and outputs to the current directory. <a class="el" href="protocol_the-p.html">The</a> <code>import_style</code> option is left to the default, which is <code>closure</code>.</li>
<li><code>--js_out=import_style=commonjs,binary:protos</code>: this contains the options <code>import_style=commonjs</code> and <code>binary</code> and outputs to the directory <code>protos</code>.</li>
</ul>
<h1><a class="el" href="namespace_a_p_i.html">API</a> </h1>
<p><a class="el" href="protocol_the-p.html">The</a> <a class="el" href="namespace_a_p_i.html">API</a> is not well-documented yet. Here is a quick example to give you an idea of how the library generally works: </p><pre class="fragment">var message = new MyMessage();

message.setName("John Doe");
message.setAge(25);
message.setPhoneNumbers(["800-555-1212", "800-555-0000"]);

// Serializes to a UInt8Array.
bytes = message.serializeBinary();

var message2 = new MyMessage();
message2.deserializeBinary(bytes);
</pre><p>For more examples, see the tests. You can also look at the generated code to see what methods are defined for your generated messages. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
