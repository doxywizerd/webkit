<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>webkit: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">webkit
   &#160;<span id="projectnumber">2cdf99a9e3038c7e01b3c37e8ad903ecbe5eecf1</span>
   </div>
   <div id="projectbrief">https://github.com/WebKit/webkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This directory contains the Ruby extension that implements Protocol Buffers functionality in Ruby.</p>
<p><a class="el" href="protocol_the-p.html">The</a> Ruby extension makes use of generated Ruby code that defines message and enum types in a Ruby DSL. You may write definitions in this DSL directly, but we recommend using protoc's Ruby generation support with .proto files. <a class="el" href="protocol_the-p.html">The</a> build process in this directory only installs the extension; you need to install protoc as well to have Ruby code generation functionality.</p>
<h2>Installation from Gem </h2>
<p>When we release a version of Protocol Buffers, we will upload a Gem to <a href="https://www.rubygems.org/">RubyGems</a>. To use this pre-packaged gem, simply install it as you would any other gem: </p><pre class="fragment">$ gem install [--prerelease] google-protobuf
</pre><p><a class="el" href="protocol_the-p.html">The</a> <code>--pre</code> flag is necessary if we have not yet made a non-alpha/beta release of the Ruby extension; it allows <code>gem</code> to consider these "pre-release" alpha/beta versions.</p>
<p>Once the gem is installed, you may or may not need <code>protoc</code>. If you write your message type descriptions directly in the Ruby DSL, you do not need it. However, if you wish to generate the Ruby DSL from a <code>.proto</code> file, you will also want to install Protocol Buffers itself, as described in this repository's main <code>README</code> file. <a class="el" href="protocol_the-p.html">The</a> version of <code>protoc</code> included in the latest release supports the <code>--ruby_out</code> option to generate Ruby code.</p>
<p><a class="el" href="struct_a.html">A</a> simple example of using the Ruby extension follows. More extensive documentation may be found in the RubyDoc comments (<code>call-seq</code> tags) in the source, and we plan to release separate, more detailed, documentation at a later date.</p>
<div class="fragment"><div class="line">require &#39;google/protobuf&#39;</div><div class="line"></div><div class="line"># generated from my_proto_types.proto with protoc:</div><div class="line">#  $ protoc --ruby_out=. my_proto_types.proto</div><div class="line">require &#39;my_proto_types&#39;</div><div class="line"></div><div class="line">mymessage = MyTestMessage.new(:field1 =&gt; 42, :field2 =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])</div><div class="line">mymessage.field1 = 43</div><div class="line">mymessage.field2.push(&quot;d&quot;)</div><div class="line">mymessage.field3 = SubMessage.new(:foo =&gt; 100)</div><div class="line"></div><div class="line">encoded_data = MyTestMessage.encode(mymessage)</div><div class="line">decoded = MyTestMessage.decode(encoded_data)</div><div class="line">assert decoded == mymessage</div><div class="line"></div><div class="line">puts &quot;JSON:&quot;</div><div class="line">puts MyTestMessage.encode_json(mymessage)</div></div><!-- fragment --><h2>Installation from <a class="el" href="struct_source.html">Source</a> (Building Gem) </h2>
<p>To build this Ruby extension, you will need:</p>
<ul>
<li>Rake</li>
<li>Bundler</li>
<li>Ruby development headers</li>
<li>a <a class="el" href="class_c.html">C</a> compiler</li>
</ul>
<p>To Build the JRuby extension, you will need:</p>
<ul>
<li>Maven</li>
<li><a class="el" href="protocol_the-p.html">The</a> latest version of the protobuf java library (see ../java/README.md)</li>
<li>Install JRuby via rbenv or RVM</li>
</ul>
<p>First switch to the desired platform with rbenv or RVM.</p>
<p>Then install the required Ruby gems: </p><pre class="fragment">$ gem install bundler
$ bundle
</pre><p>Then build the Gem: </p><pre class="fragment">$ rake
$ rake clobber_package gem
$ gem install `ls pkg/google-protobuf-*.gem`
</pre><p>To run the specs: </p><pre class="fragment">$ rake test
</pre><p>This gem includes the upb parsing and serialization library as a single-file amalgamation. It is up-to-date with upb git commit <code>535bc2fe2f2b467f59347ffc9449e11e47791257</code>.</p>
<h2>Version Number Scheme </h2>
<p>We are using a version number scheme that is a hybrid of Protocol Buffers' overall version number and some Ruby-specific rules. Gem does not allow re-uploads of a gem with the same version number, so we add a sequence number ("upload version") to the version. We also format alphabetical tags (alpha, pre, ...) slightly differently, and we avoid hyphens. In more detail:</p>
<ul>
<li>First, we determine the prefix: a Protocol Buffers version "3.0.0-alpha-2" becomes "3.0.0.alpha.2". When we release 3.0.0, this prefix will be simply "3.0.0".</li>
<li>We then append the upload version: "3.0.0.alpha.2.0" or "3.0.0.0". If we need to upload a new version of the gem to fix an issue, the version becomes "3.0.0.alpha.2.1" or "3.0.0.1".</li>
<li>If we are working on a prerelease version, we append a prerelease tag: "3.0.0.alpha.3.0.pre". <a class="el" href="protocol_the-p.html">The</a> prerelease tag comes at the end so that when version numbers are sorted, any prerelease builds are ordered between the prior version and current version.</li>
</ul>
<p>These rules are designed to work with the sorting rules for <a href="http://ruby-doc.org/stdlib-2.0/libdoc/rubygems/rdoc/Gem/Version.html">Gem::Version</a>: release numbers should sort in actual release order. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
