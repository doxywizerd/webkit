<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>webkit: The web-platform-tests Project [![IRC chat](https://goo.gl/6nCIks)](http://irc.w3.org/?channels=testing)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">webkit
   &#160;<span id="projectnumber">2cdf99a9e3038c7e01b3c37e8ad903ecbe5eecf1</span>
   </div>
   <div id="projectbrief">https://github.com/WebKit/webkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="protocol_the-p.html">The</a> web-platform-tests Project [![IRC chat](<a href="https://goo.gl/6nCIks">https://goo.gl/6nCIks</a>)](<a href="http://irc.w3.org/?channels=testing">http://irc.w3.org/?channels=testing</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="protocol_the-p.html">The</a> web-platform-tests Project is a W3C-coordinated attempt to build a cross-browser testsuite for the Web-platform stack. However, for mainly historic reasons, the CSS WG testsuite is in a separate repository, <a href="https://github.com/w3c/csswg-test">csswg-test</a>. Writing tests in a way that allows them to be run in all browsers gives browser projects confidence that they are shipping software that is compatible with other implementations, and that later implementations will be compatible with their implementations. This in turn gives Web authors/developers confidence that they can actually rely on the Web platform to deliver on the promise of working across browsers and devices without needing extra layers of abstraction to paper over the gaps left by specification editors and implementors.</p>
<h1>Running the Tests </h1>
<p><a class="el" href="protocol_the-p.html">The</a> tests are designed to be run from your local computer. <a class="el" href="protocol_the-p.html">The</a> test environment requires <a href="http://www.python.org/downloads">Python 2.7+</a> (but not Python 3.x). You will also need a copy of OpenSSL.</p>
<p>On Windows, be sure to add the Python directory (<code>c:\python2x</code>, by default) to your <code>Path%</code> <a href="http://www.computerhope.com/issues/ch000549.htm">Environment Variable</a>, and read the <a href="#windows-notes">Windows Notes</a> section below.</p>
<p>To get the tests running, you need to set up the test domains in your <a href="http://en.wikipedia.org/wiki/Hosts_%28file%29%23Location_in_the_file_system"><code>hosts</code> file</a>. <a class="el" href="protocol_the-p.html">The</a> following entries are required:</p>
<div class="fragment"><div class="line">127.0.0.1   web-platform.test</div><div class="line">127.0.0.1   www.web-platform.test</div><div class="line">127.0.0.1   www1.web-platform.test</div><div class="line">127.0.0.1   www2.web-platform.test</div><div class="line">127.0.0.1   xn--n8j6ds53lwwkrqhv28a.web-platform.test</div><div class="line">127.0.0.1   xn--lve-6lad.web-platform.test</div><div class="line">0.0.0.0     nonexistent-origin.web-platform.test</div></div><!-- fragment --><p>If you are behind a proxy, you also need to make sure the domains above are excluded from your proxy lookups.</p>
<p>Because web-platform-tests uses git submodules, you must ensure that these are up to date. In the root of your checkout, run:</p>
<div class="fragment"><div class="line">git submodule update --init --recursive</div></div><!-- fragment --><p><a class="el" href="protocol_the-p.html">The</a> test environment can then be started using </p><pre class="fragment">./serve
</pre><p>This will start HTTP servers on two ports and a websockets server on one port. By default one web server starts on port 8000 and the other ports are randomly-chosen free ports. Tests must be loaded from the <em>first</em> HTTP server in the output. To change the ports, copy the <code>config.default.json</code> file to <code>config.json</code> and edit the new file, replacing the part that reads:</p>
<div class="fragment"><div class="line">&quot;http&quot;: [8000, &quot;auto&quot;]</div></div><!-- fragment --><p>to some port of your choice e.g.</p>
<div class="fragment"><div class="line">&quot;http&quot;: [1234, &quot;auto&quot;]</div></div><!-- fragment --><p>If you installed OpenSSL in such a way that running <code>openssl</code> at a command line doesn't work, you also need to adjust the path to the OpenSSL binary. This can be done by adding a section to <code>config.json</code> like:</p>
<div class="fragment"><div class="line">&quot;ssl&quot;: {&quot;openssl&quot;: {&quot;binary&quot;: &quot;/path/to/openssl&quot;}}</div></div><!-- fragment --><h1>Windows Notes </h1>
<p>Running wptserve with SSL enabled on Windows typically requires installing an OpenSSL distribution. <a href="https://slproweb.com/products/Win32OpenSSL.html">Shining Light</a> provide a convenient installer that is known to work, but requires a little extra setup, i.e.:</p>
<p>Run the installer for Win32_OpenSSL_v1.1.0b (30MB). During installation, change the default location for where to Copy OpenSSL Dlls from the System directory to the /bin directory.</p>
<p>After installation, ensure that the path to OpenSSL (typically, this will be <code><a class="el" href="class_c.html">C</a>:\OpenSSL-Win32\bin</code>) is in your <code>Path%</code> <a href="http://www.computerhope.com/issues/ch000549.htm">Environment Variable</a>. If you forget to do this part, you will most likely see a '<a class="el" href="interface_file.html">File</a> Not Found' error when you start wptserve.</p>
<p>Finally, set the path value in the server configuration file to the default OpenSSL configuration file location. To do this, copy <code>config.default.json</code> in the web-platform-tests root to <code>config.json</code>. Then edit the JSON so that the key <code>ssl/openssl/base_conf_path</code> has a value that is the path to the OpenSSL config file (typically this will be <code><a class="el" href="class_c.html">C</a>:\\OpenSSL-Win32\\bin\\openssl.cfg</code>).</p>
<p>Alternatively, you may also use <a href="https://msdn.microsoft.com/en-us/commandline/wsl/about">Bash on Ubuntu on Windows</a> in the Windows 10 Anniversary Update build, then access your windows partition from there to launch wptserve.</p>
<h1><a class="el" href="struct_test.html">Test</a> Runner </h1>
<p>There is a test runner that is designed to provide a convenient way to run the web-platform-tests in-browser. It will run testharness.js tests automatically but requires manual work for reftests and manual tests.</p>
<p><a class="el" href="protocol_the-p.html">The</a> runner can be found at <code>/tools/runner/index.html</code> on the local server i.e.</p>
<div class="fragment"><div class="line">http://web-platform.test:8000/tools/runner/index.html</div></div><!-- fragment --><p>in the default configuration. <a class="el" href="protocol_the-p.html">The</a> first time you use this it has to generate a manifest of all tests. This may take some time, so please be patient.</p>
<h1>Publication </h1>
<p><a class="el" href="protocol_the-p.html">The</a> master branch is automatically synced to <a href="http://w3c-test.org/">http://w3c-test.org/</a>.</p>
<p>Pull requests are automatically mirrored to <a href="http://w3c-test.org/submissions/">http://w3c-test.org/submissions/</a> a few minutes after someone with merge access has added a comment with "LGTM" (or "w3c-test:mirror") to indicate the PR has been checked.</p>
<h1>Finding Things </h1>
<p>Each top-level directory represents a W3C specification: the name matches the shortname used after the canonical address of the said specification under <a href="http://www.w3.org/TR/">http://www.w3.org/TR/</a> .</p>
<p>For some of the specifications, the tree under the top-level directory represents the sections of the respective documents, using the section IDs for directory names, with a maximum of three levels deep.</p>
<p>So if you're looking for tests in HTML for "The History interface", they will be under <code>html/browsers/history/the-history-interface/</code>.</p>
<p>Various resources that tests depend on are in <code>common</code>, <code>images</code>, and <code>fonts</code>.</p>
<h1>Branches </h1>
<p>In the vast majority of cases the <b>only</b> upstream branch that you should need to care about is <code>master</code>. If you see other branches in the repository, you can generally safely ignore them.</p>
<h1>Contributing </h1>
<p>Save the Web, Write Some Tests!</p>
<p>Absolutely everyone is welcome (and even encouraged) to contribute to test development, so long as you fulfill the contribution requirements detailed in the https://github.com/w3c/web-platform-tests/blob/master/CONTRIBUTING.md "Contributing Guidelines". No test is too small or too simple, especially if it corresponds to something for which you've noted an interoperability bug in a browser.</p>
<p><a class="el" href="protocol_the-p.html">The</a> way to contribute is just as usual:</p>
<ul>
<li>Fork this repository (and make sure you're still relatively in sync with it if you forked a while ago).</li>
<li>Create a branch for your changes: <code>git checkout -b topic</code>.</li>
<li>Make your changes.</li>
<li>Run the lint script described below.</li>
<li>Commit locally and push that to your repo.</li>
<li>Send in a pull request based on the above.</li>
</ul>
<h2>Lint tool </h2>
<p>We have a lint tool for catching common mistakes in test files. You can run it manually by starting the <code>lint</code> executable from the root of your local web-platform-tests working directory like this:</p>
<div class="fragment"><div class="line">./lint</div></div><!-- fragment --><p><a class="el" href="protocol_the-p.html">The</a> lint tool is also run automatically for every submitted pull request, and reviewers will not merge branches with tests that have lint errors, so you must fix any errors the lint tool reports. For details on doing that, see the https://github.com/w3c/web-platform-tests/blob/master/docs/lint-tool.md "lint-tool documentation".</p>
<p>But in the unusual case of error reports for things essential to a certain test or that for other exceptional reasons shouldn't prevent a merge of a test, update and commit the <code>lint.whitelist</code> file in the web-platform-tests root directory to suppress the error reports. For details on doing that, see the https://github.com/w3c/web-platform-tests/blob/master/docs/lint-tool.md "lint-tool documentation".</p>
<h2>Adding command-line scripts ("tools" subdirs) </h2>
<p>Sometimes you may want to add a script to the repository that's meant to be used from the command line, not from a browser (e.g., a script for generating test files). If you want to ensure (e.g., for security reasons) that such scripts won't be handled by the HTTP server, but will instead only be usable from the command line, then place them in either:</p>
<ul>
<li>the <code>tools</code> subdir at the root of the repository, or</li>
<li>the <code>tools</code> subdir at the root of any top-level directory in the repository which contains the tests the script is meant to be used with</li>
</ul>
<p>Any files in those <code>tools</code> directories won't be handled by the HTTP server; instead the server will return a 404 if a user navigates to the URL for a file within them.</p>
<p>If you want to add a script for use with a particular set of tests but there isn't yet any <code>tools</code> subdir at the root of a top-level directory in the repository containing those tests, you can create a <code>tools</code> subdir at the root of that top-level directory and place your scripts there.</p>
<p>For example, if you wanted to add a script for use with tests in the <code>notifications</code> directory, create the <code>notifications/tools</code> subdir and put your script there.</p>
<h1><a class="el" href="struct_test.html">Test</a> Review </h1>
<p>We can sometimes take a little while to go through pull requests because we have to go through all the tests and ensure that they match the specification correctly. But we look at all of them, and take everything that we can.</p>
<p>OWNERS files are used only to indicate who should be notified of pull requests. If you are interested in receiving notifications of proposed changes to tests in a given directory, feel free to add yourself to the OWNERS file. Anyone with expertise in the specification under test can approve a pull request. In particular, if a test change has already been adequately reviewed "upstream" in another repository, it can be pushed here without any further review by supplying a link to the upstream review.</p>
<h1>Getting Involved </h1>
<p>If you wish to contribute actively, you're very welcome to join the <a href="#" onclick="location.href='mai'+'lto:'+'pub'+'li'+'c-t'+'es'+'t-i'+'nf'+'ra@'+'w3'+'.or'+'g'; return false;">publi<span style="display: none;">.nosp@m.</span>c-te<span style="display: none;">.nosp@m.</span>st-in<span style="display: none;">.nosp@m.</span>fra@<span style="display: none;">.nosp@m.</span>w3.or<span style="display: none;">.nosp@m.</span>g</a> mailing list (low traffic) by <a href="#" onclick="location.href='mai'+'lto:'+'pub'+'li'+'c-t'+'es'+'t-i'+'nf'+'ra-'+'re'+'que'+'st'+'@w3'+'.o'+'rg?'+'su'+'bje'+'ct'+'=su'+'bs'+'cri'+'be'; return false;">signing up to our mailing list</a>. <a class="el" href="protocol_the-p.html">The</a> mailing list is <a href="http://lists.w3.org/Archives/Public/public-test-infra/">archived</a>.</p>
<p>Join us on irc <a class="el" href="namespacetesting.html">testing</a> (<a href="https://www.w3.org/wiki/IRC">irc.w3.org</a>, port 6665). <a class="el" href="protocol_the-p.html">The</a> channel is <a href="http://krijnhoetmer.nl/irc-logs/testing/">archived</a>.</p>
<h1>Documentation </h1>
<ul>
<li><a href="http://testthewebforward.org/docs/">How to write and review tests</a></li>
<li><a href="http://wptserve.readthedocs.org/en/latest/">Documentation for the wptserve server</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
